# PII Detection & Masking Tool


![Alt text](images/masking.png)


This Streamlit-based application detects and masks Personally Identifiable Information (PII) from both unstructured text files (.txt) and structured CSV files (.csv) using pre-trained models from Hugging Face, the faker library for smart dummy replacements, and optionally logs masked mappings to Supabase.

In this project, we used two models in a pipelined approach to improve PII detection in unstructured data. The first model, piiranha-v1-detect-personal-information, accurately detects various PII types like emails, phone numbers, and addresses but often misses person names. To fill this gap, we added roberta-large-ner-english, a model fine-tuned for Named Entity Recognition (NER), which effectively identifies names using tags like PER, B-PER, and I-PER. Combining both models ensures more complete detection and makes the system modular and easy to extend.

For structured data like CSV files, we use a column-wise approach instead of tokenizing each cell individually. A lightweight language model (Mistral) classifies each column based on its content (e.g., Name, Email, SSN), allowing us to apply targeted masking using realistic dummy values generated by Faker. This method is faster, scalable, and ensures context-aware anonymization, while all mappings are optionally logged to Supabase for traceability.

## Features

- ğŸ” Automatic PII Detection using pre-trained models. You can find pre-trained models [here](http://huggingface.co/).
    
- ğŸ¤– Smart Dummy Masking with Faker library .

- ğŸ“¦ Text (.txt) and CSV (.csv) Support:
    - Text files are split into paragraphs and masked accordingly.
    - CSV files are first classified using a local Mistral model to identify sensitive columns.

- â˜ï¸ Supabase Integration (Optional): Logs original-to-masked mappings for audit/compliance.

- ğŸ’¾ Downloadable Output: Masked files can be downloaded instantly.

- ğŸ§  LLM Classification: Uses Mistral 7B to classify CSV columns as sensitive or not.

## ğŸ“ File Structure

```
â”œâ”€â”€ app.py                   # Main Streamlit app logic
â”œâ”€â”€ masked.py               # Masking logic for text and CSV
â”œâ”€â”€ MISTRAL_classifier.py   # Column classifier using Mistral 7B
â”œâ”€â”€ .env                    # Environment file for Supabase keys
â”œâ”€â”€ requirements.txt        # Python dependencies
â””â”€â”€ sample_data/            # Folder containing sample .csv and .txt files for testing

```
## ğŸ§° Requirements

- Python 3.8+

- Hugging Face Token (for loading models)

- GPU recommended for faster Mistral model inference

## ğŸ› ï¸ Setup Instructions

1. Clone the repository 

```
https://github.com/spoortimorabad/Personally-Identifiable-Information-PII-.git

cd PII 
```

2. Install Dependencies

```
pip install -r requirements.txt
```

3. Add Environment Variables

Create a .env file with your Supabase credentials:

```
SUPABASE_URL=https://yourproject.supabase.co
SUPABASE_KEY=your-supabase-service-role-key

```
If you're not using Supabase, you can safely leave these blank and masking will still work.

4. Add Hugging Face Token

Either export your token:
```
huggingface-cli login
``` 
Or add it directly in code:
```
from huggingface_hub import login
login("your_huggingface_token")
```

5. How to Run the App

```
streamlit run app.py
```
## ğŸ§ª How It Works

- ğŸ“„ For .txt Files (Unstructured Data)
    - Upload a text file containing paragraphs.

    - App detects and masks any PII (names, emails, phone numbers, SSNs, etc.).

    - Outputs the cleaned text and allows CSV download of masked paragraphs.

- ğŸ“Š For .csv Files (Structured Data)
    - Upload a CSV with any data (e.g., name, email, address).

    - App uses a local Mistral model to classify columns as sensitive.

    - Masked values are inserted into Supabase and shown in a downloadable table.

## ğŸ§  Models Used

- iiiorg/piiranha-v1-detect-personal-information for general PII types. You can find more information about this model [here](https://huggingface.co/iiiorg/piiranha-v1-detect-personal-information) .
- Jean-Baptiste/roberta-large-ner-english for high-accuracy name detection.You can find more information about this model [here](https://huggingface.co/Jean-Baptiste/roberta-large-ner-english) .
- mistralai/Mistral-7B-Instruct-v0.1 for column classification. You can find more information about this model [here](https://huggingface.co/mistralai/Mistral-7B-Instruct-v0.1) .

## License

This project is licensed under the MIT License - see the LICENSE file for details.



